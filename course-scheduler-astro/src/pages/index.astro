---
/**
 * Main Index Page
 *
 * Entry point for the CITU Course Builder application.
 * Contains test islands for React hydration and theme verification.
 */
import BaseLayout from '../layouts/BaseLayout.astro';
import TestIsland from '../components/TestIsland';
import RawDataInput from '../components/RawDataInput';
import ConfirmDialogTest from '../components/ConfirmDialogTest';
import TimeFilterTest from '../components/TimeFilterTest';
import CourseTableTest from '../components/CourseTableTest';
import TimetableViewTest from '../components/TimetableViewTest';
---

<BaseLayout title="CIT-U Course Builder - Astro">
  <main class="container-main py-8">
    <!-- Theme Test Section -->
    <section class="p-6 mb-8 rounded-lg bg-surface-secondary border border-default">
      <h2 class="text-xl font-semibold text-content-primary mb-4">Theme System Test</h2>
      <p class="text-content-secondary mb-4">
        Use the theme toggle buttons in the header to test the 6 theme combinations. The colors
        below should change based on the selected theme and palette.
      </p>

      <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-6">
        <div class="p-4 rounded-md bg-surface-primary border border-default">
          <p class="text-sm text-content-secondary mb-1">Surface Primary</p>
          <p class="text-content-primary font-medium">Background</p>
        </div>
        <div class="p-4 rounded-md bg-surface-elevated border border-default">
          <p class="text-sm text-content-secondary mb-1">Surface Elevated</p>
          <p class="text-content-primary font-medium">Card/Section</p>
        </div>
        <div class="p-4 rounded-md bg-surface-header">
          <p class="text-sm text-content-header text-opacity-80 mb-1">Surface Header</p>
          <p class="text-content-header font-medium">Header BG</p>
        </div>
        <div class="p-4 rounded-md bg-success text-white">
          <p class="text-sm text-white text-opacity-80 mb-1">Success</p>
          <p class="font-medium">Semantic Color</p>
        </div>
        <div class="p-4 rounded-md bg-warning text-black">
          <p class="text-sm text-black text-opacity-80 mb-1">Warning</p>
          <p class="font-medium">Semantic Color</p>
        </div>
        <div class="p-4 rounded-md bg-danger text-white">
          <p class="text-sm text-white text-opacity-80 mb-1">Danger</p>
          <p class="font-medium">Semantic Color</p>
        </div>
      </div>

      <h3 class="text-lg font-medium text-content-primary mb-3">Button Styles</h3>
      <div class="flex flex-wrap gap-3">
        <button class="btn-primary px-4 py-2 rounded-md">Primary Button</button>
        <button class="btn-danger px-4 py-2 rounded-md">Danger Button</button>
        <button
          class="px-4 py-2 rounded-md bg-interactive-primary text-white hover:bg-interactive-primary-hover transition-colors"
        >
          Accent Button
        </button>
      </div>
    </section>

    <!-- React Island Test Section -->
    <section class="p-6 mb-8 rounded-lg bg-surface-secondary border border-default">
      <h2 class="text-xl font-semibold text-content-primary mb-2">
        React Island Test (client:load)
      </h2>
      <p class="text-content-secondary mb-4">
        This component tests React hydration with <code
          class="px-2 py-1 rounded bg-surface-elevated text-content-primary">client:load</code
        > directive. If the buttons work, React hydration is working correctly.
      </p>
      <TestIsland client:load />
    </section>

    <!-- RawDataInput Test Section -->
    <section class="p-6 mb-8 rounded-lg bg-surface-secondary border border-default">
      <h2 class="text-xl font-semibold text-content-primary mb-2">
        RawDataInput Component (client:load)
      </h2>
      <p class="text-content-secondary mb-4">
        This component provides import functionality for WITS and AIMS course data. Test the mode
        toggle buttons and textarea input below.
      </p>
      <div class="bg-surface-elevated p-4 rounded-lg">
        <RawDataInput
          value=""
          onChange={() => {}}
          onSubmit={(mode) => console.log(`Import submitted with mode: ${mode}`)}
          client:load
        />
      </div>
    </section>

    <!-- ConfirmDialog Test Section -->
    <section class="p-6 mb-8 rounded-lg bg-surface-secondary border border-default">
      <h2 class="text-xl font-semibold text-content-primary mb-2">
        ConfirmDialog Component (client:load)
      </h2>
      <p class="text-content-secondary mb-4">
        This component provides accessible confirmation dialogs. Test the dialog variants below.
        Press Escape to close, or click outside the dialog.
      </p>
      <ConfirmDialogTest client:load />
    </section>

    <!-- TimeFilter Test Section -->
    <section class="p-6 mb-8 rounded-lg bg-surface-secondary border border-default">
      <h2 class="text-xl font-semibold text-content-primary mb-2">
        TimeFilter Component (client:visible)
      </h2>
      <p class="text-content-secondary mb-4">
        This component provides day and time filtering for schedule generation. Uses a custom
        Tailwind-styled time picker instead of react-datepicker. Test the day exclusion buttons and
        time range selectors below.
      </p>
      <TimeFilterTest client:visible />
    </section>

    <!-- CourseTable Test Section -->
    <section class="p-6 mb-8 rounded-lg bg-surface-secondary border border-default">
      <h2 class="text-xl font-semibold text-content-primary mb-2">
        CourseTable Component (client:load)
      </h2>
      <p class="text-content-secondary mb-4">
        This component displays course data with grouping, filtering, export, and locking
        functionality. Test the grouping dropdown, status filter buttons, lock/unlock buttons, and
        export menu below.
      </p>
      <CourseTableTest client:load />
    </section>

    <!-- TimetableView Test Section -->
    <section class="p-6 mb-8 rounded-lg bg-surface-secondary border border-default">
      <h2 class="text-xl font-semibold text-content-primary mb-2">
        TimetableView Component (client:visible)
      </h2>
      <p class="text-content-secondary mb-4">
        This component displays a visual weekly timetable for locked courses. It supports export to
        PNG, PDF, and iCalendar (.ics) formats. Test the export menu and conflict highlighting
        toggle below.
      </p>
      <TimetableViewTest client:visible />
    </section>

    <!-- Hydration Strategy Table -->
    <section class="p-6 rounded-lg bg-surface-secondary border border-default">
      <h2 class="text-xl font-semibold text-content-primary mb-4">
        Hydration Strategy (from ADR-001)
      </h2>
      <div class="overflow-x-auto">
        <table class="w-full border-collapse">
          <thead>
            <tr class="border-b border-default">
              <th class="p-3 text-left text-content-primary font-semibold">Component</th>
              <th class="p-3 text-left text-content-primary font-semibold">Directive</th>
              <th class="p-3 text-left text-content-primary font-semibold">Rationale</th>
            </tr>
          </thead>
          <tbody class="text-content-secondary">
            <tr class="border-b border-default row-odd">
              <td class="p-3">RawDataInput</td>
              <td class="p-3"
                ><code class="px-2 py-1 rounded bg-surface-elevated text-content-primary"
                  >client:load</code
                ></td
              >
              <td class="p-3">Critical for user input, must be interactive immediately</td>
            </tr>
            <tr class="border-b border-default row-even">
              <td class="p-3">CourseTable</td>
              <td class="p-3"
                ><code class="px-2 py-1 rounded bg-surface-elevated text-content-primary"
                  >client:load</code
                ></td
              >
              <td class="p-3">Central feature, user interacts immediately</td>
            </tr>
            <tr class="border-b border-default row-odd">
              <td class="p-3">TimeFilter</td>
              <td class="p-3"
                ><code class="px-2 py-1 rounded bg-surface-elevated text-content-primary"
                  >client:visible</code
                ></td
              >
              <td class="p-3">Can wait until user scrolls to filter section</td>
            </tr>
            <tr class="border-b border-default row-even">
              <td class="p-3">TimetableView</td>
              <td class="p-3"
                ><code class="px-2 py-1 rounded bg-surface-elevated text-content-primary"
                  >client:visible</code
                ></td
              >
              <td class="p-3">Heavy component with export libraries, lazy load</td>
            </tr>
            <tr class="row-odd">
              <td class="p-3">ConfirmDialog</td>
              <td class="p-3"
                ><code class="px-2 py-1 rounded bg-surface-elevated text-content-primary"
                  >client:load</code
                ></td
              >
              <td class="p-3">May appear on initial interaction</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>
</BaseLayout>
